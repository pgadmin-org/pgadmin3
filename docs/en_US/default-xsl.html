<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Mac OS X (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
  <link rel="STYLESHEET" type="text/css" href="pgadmin3.css">

  <title>Default XSL stylesheet</title>
</head>

<body>
  <h3>Default XSL stylesheet</h3>

  <p>For reference, and as a starting point for your own stylesheets, the
  builtin stylesheet that pgAdmin uses to render XHTML report output from XML
  report data is included below. This stylesheet includes the default HTML
  stylesheet that will be embedded into a report to give it the pgAdmin look
  and feel.</p>
  <pre style="background-color: #dddddd;">
&lt;?xml version="1.0"?&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
&lt;xsl:output method="xml" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" indent="yes" encoding="utf-8" /&gt;
&lt;xsl:template match="/report"&gt;

&lt;html&gt;
  &lt;head&gt;
    &lt;xsl:if test="header/title != ''"&gt;
      &lt;title&gt;&lt;xsl:value-of select="header/title" /&gt;&lt;/title&gt;
    &lt;/xsl:if&gt;
    &lt;meta http-equiv="Content-Type" content="utf-8" /&gt;
    &lt;style type="text/css"&gt;
      body {  font-family: verdana, helvetica, sans-serif; margin: 0px; padding: 0; }
      h1 { font-weight: bold; font-size: 150%; border-bottom-style: solid; border-bottom-width: 2px; margin-top: 0px; padding-bottom: 0.5ex; color: #eeeeee; }
      h2 { font-size: 130%; padding-bottom: 0.5ex; color: #009ace; border-bottom-style: solid; border-bottom-width: 2px; }
      h3 { font-size: 110%; padding-bottom: 0.5ex; color: #000000; }
      th { text-align: left; background-color: #009ace; color: #eeeeee; }
      #ReportHeader { padding: 10px; background-color: #009ace; color: #eeeeee; border-bottom-style: solid; border-bottom-width: 2px; border-color: #999999; }
      #ReportHeader th { width: 25%; white-space: nowrap; vertical-align: top; }
      #ReportHeader td { vertical-align: top; color: #eeeeee; }
      #ReportNotes { padding: 10px; background-color: #eeeeee; font-size: 80%; border-bottom-style: solid; border-bottom-width: 2px; border-color: #999999; }
      .ReportSQL { margin-bottom: 10px; padding: 10px; display: block; background-color: #eeeeee; font-family: monospace; }
      #ReportDetails { margin-left: 10px; margin-right: 10px; margin-bottom: 10px; }
      #ReportDetails td, th { font-size: 80%; margin-left: 2px; margin-right: 2px; }
      #ReportDetails th { border-bottom-color: #777777; border-bottom-style: solid; border-bottom-width: 2px; }
      .ReportDetailsOddDataRow { background-color: #dddddd; }
      .ReportDetailsEvenDataRow { background-color: #eeeeee; }
      .ReportTableHeaderCell { background-color: #dddddd; color: #009ace; vertical-align: top; font-size: 80%; white-space: nowrap; }
      .ReportTableValueCell { vertical-align: top; font-size: 80%; white-space: nowrap; }
      .ReportTableInfo { font-size: 80%; font-style: italic; }
      #ReportFooter { font-weight: bold; font-size: 80%; text-align: right; background-color: #009ace; color: #eeeeee; margin-top: 10px; padding: 2px; border-bottom-style: solid; border-bottom-width: 2px; border-top-style: solid; border-top-width: 2px; border-color: #999999; }
      #ReportFooter a { color: #ffffff; text-decoration: none; }
    &lt;/style&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;div id="ReportHeader"&gt;

    &lt;xsl:if test="header/title != ''"&gt;
      &lt;h1&gt;&lt;xsl:value-of select="header/title" /&gt;&lt;/h1&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/generated != ''"&gt;
      &lt;b&gt;Generated: &lt;/b&gt;&lt;xsl:value-of select="header/generated" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/server != ''"&gt;
      &lt;b&gt;Server: &lt;/b&gt;&lt;xsl:value-of select="header/server" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/database != ''"&gt;
      &lt;b&gt;Database: &lt;/b&gt;&lt;xsl:value-of select="header/database" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/catalog != ''"&gt;
      &lt;b&gt;Catalog: &lt;/b&gt;&lt;xsl:value-of select="header/catalog" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/schema != ''"&gt;
      &lt;b&gt;Schema: &lt;/b&gt;&lt;xsl:value-of select="header/schema" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/table != ''"&gt;
      &lt;b&gt;Table: &lt;/b&gt;&lt;xsl:value-of select="header/table" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:if test="header/job != ''"&gt;
      &lt;b&gt;Job: &lt;/b&gt;&lt;xsl:value-of select="header/job" /&gt;&lt;br /&gt;
    &lt;/xsl:if&gt;

    &lt;/div&gt;

    &lt;xsl:if test="header/notes != ''"&gt;
      &lt;div id="ReportNotes"&gt;
      &lt;b&gt;Notes: &lt;/b&gt;&lt;br /&gt;&lt;br /&gt;
      &lt;xsl:call-template name="substitute"&gt;
         &lt;xsl:with-param name="string" select="header/notes" /&gt;
      &lt;/xsl:call-template&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;

    &lt;div id="ReportDetails"&gt;
      &lt;xsl:apply-templates select="section" &gt;
        &lt;xsl:sort select="@number" data-type="number" order="ascending" /&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/div&gt;

    &lt;div id="ReportFooter"&gt;
Report generated by &lt;a href="http://www.pgadmin.org/"&gt;pgAdmin&lt;/a&gt;
    &lt;/div&gt;

    &lt;br /&gt;
  &lt;/body&gt;
&lt;/html&gt;

&lt;/xsl:template&gt;

&lt;xsl:template match="section"&gt;
  &lt;xsl:if test="../section[@id = current()/@id]/@name != ''"&gt;
    &lt;h2&gt;&lt;xsl:value-of select="../section[@id = current()/@id]/@name" /&gt;&lt;/h2&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="count(../section[@id = current()/@id]/table/columns/column) &gt; 0"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;xsl:apply-templates select="../section[@id = current()/@id]/table/columns/column"&gt;
          &lt;xsl:sort select="@number" data-type="number" order="ascending" /&gt;
          &lt;xsl:with-param name="count" select="count(../section[@id = current()/@id]/table/columns/column)" /&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/tr&gt;
      &lt;xsl:apply-templates select="../section[@id = current()/@id]/table/rows/*" mode="rows"&gt;
          &lt;xsl:sort select="@number" data-type="number" order="ascending" /&gt;
        &lt;xsl:with-param name="column-meta" select="../section[@id = current()/@id]/table/columns/column" /&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/table&gt;
    &lt;br /&gt;
    &lt;xsl:if test="../section[@id = current()/@id]/table/info != ''"&gt;
      &lt;p class="ReportTableInfo"&gt;&lt;xsl:value-of select="../section[@id = current()/@id]/table/info" /&gt;&lt;/p&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="../section[@id = current()/@id]/sql != ''"&gt;
    &lt;pre class="ReportSQL"&gt;
      &lt;xsl:call-template name="substitute"&gt;
         &lt;xsl:with-param name="string" select="../section[@id = current()/@id]/sql" /&gt;
      &lt;/xsl:call-template&gt;
    &lt;/pre&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="column"&gt;
  &lt;xsl:param name="count" /&gt;
  &lt;th class="ReportTableHeaderCell"&gt;
  &lt;xsl:attribute name="width"&gt;&lt;xsl:value-of select="100 div $count" /&gt;%&lt;/xsl:attribute&gt;
    &lt;xsl:call-template name="substitute"&gt;
       &lt;xsl:with-param name="string" select="@name" /&gt;
    &lt;/xsl:call-template&gt;
  &lt;/th&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="rows"&gt;
  &lt;xsl:param name="column-meta" /&gt;
  &lt;tr&gt;
  &lt;xsl:choose&gt;
  &lt;xsl:when test="position() mod 2 != 1"&gt;
    &lt;xsl:attribute name="class"&gt;ReportDetailsOddDataRow&lt;/xsl:attribute&gt;
  &lt;/xsl:when&gt;
  &lt;xsl:otherwise&gt;
    &lt;xsl:attribute name="class"&gt;ReportDetailsEvenDataRow&lt;/xsl:attribute&gt;
  &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
    &lt;xsl:apply-templates select="$column-meta" mode="cells"&gt;
      &lt;xsl:with-param name="row" select="." /&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/tr&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="cells"&gt;
  &lt;xsl:param name="row" /&gt;
    &lt;td class="ReportTableValueCell"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$row/@*[name() = current()/@id]|$row/*[name() = current()/@id] != ''"&gt;
        &lt;xsl:call-template name="substitute"&gt;
          &lt;xsl:with-param name="string" select="$row/@*[name() = current()/@id]|$row/*[name() = current()/@id]" /&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:text&gt; &lt;/xsl:text&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="substitute"&gt;
   &lt;xsl:param name="string" /&gt;
   &lt;xsl:param name="from" select="'&amp;#xA;'" /&gt;
   &lt;xsl:param name="to"&gt;
      &lt;br /&gt;
   &lt;/xsl:param&gt;
   &lt;xsl:choose&gt;
      &lt;xsl:when test="contains($string, $from)"&gt;
         &lt;xsl:value-of select="substring-before($string, $from)" /&gt;
         &lt;xsl:copy-of select="$to" /&gt;
         &lt;xsl:call-template name="substitute"&gt;
            &lt;xsl:with-param name="string" select="substring-after($string, $from)" /&gt;
            &lt;xsl:with-param name="from" select="$from" /&gt;
            &lt;xsl:with-param name="to" select="$to" /&gt;
         &lt;/xsl:call-template&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
         &lt;xsl:value-of select="$string" /&gt;
      &lt;/xsl:otherwise&gt;
   &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;

</pre>
</body>
</html>
