<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Date/Time Functions and Operators</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.4beta1 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="Functions and Operators"
HREF="functions.html"><LINK
REL="PREVIOUS"
TITLE="Data Type Formatting Functions"
HREF="functions-formatting.html"><LINK
REL="NEXT"
TITLE="Geometric Functions and Operators"
HREF="functions-geometry.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-08-05T05:04:12"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.4beta1 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="functions-formatting.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 9. Functions and Operators</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="functions-geometry.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="FUNCTIONS-DATETIME"
>9.8. Date/Time Functions and Operators</A
></H1
><P
>   <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-TABLE"
>Table 9-26</A
> shows the available
   functions for date/time value processing, with details appearing in
   the following subsections.  <A
HREF="functions-datetime.html#OPERATORS-DATETIME-TABLE"
>Table 9-25</A
> illustrates the behaviors of
   the basic arithmetic operators (<VAR
CLASS="LITERAL"
>+</VAR
>,
   <VAR
CLASS="LITERAL"
>*</VAR
>, etc.).  For formatting functions, refer to
   <A
HREF="functions-formatting.html"
>Section 9.7</A
>.  You should be familiar with
   the background information on date/time data types from <A
HREF="datatype-datetime.html"
>Section 8.5</A
>.
  </P
><P
>   All the functions and operators described below that take <TT
CLASS="TYPE"
>time</TT
> or <TT
CLASS="TYPE"
>timestamp</TT
>
   inputs actually come in two variants: one that takes <TT
CLASS="TYPE"
>time with time zone</TT
> or <TT
CLASS="TYPE"
>timestamp
   with time zone</TT
>, and one that takes <TT
CLASS="TYPE"
>time without time zone</TT
> or <TT
CLASS="TYPE"
>timestamp without time zone</TT
>.
   For brevity, these variants are not shown separately.
  </P
><DIV
CLASS="TABLE"
><A
NAME="OPERATORS-DATETIME-TABLE"
></A
><P
><B
>Table 9-25. Date/Time Operators</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>Operator</TH
><TH
>Example</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
> <VAR
CLASS="LITERAL"
>+</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>timestamp '2001-09-28 01:00' + interval '23 hours'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>timestamp '2001-09-29 00:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>+</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>date '2001-09-28' + interval '1 hour'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>timestamp '2001-09-28 01:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>+</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>time '01:00' + interval '3 hours'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>time '04:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>-</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>timestamp '2001-09-28 23:00' - interval '23 hours'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>timestamp '2001-09-28'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>-</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>date '2001-09-28' - interval '1 hour'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>timestamp '2001-09-27 23:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>-</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>time '05:00' - interval '2 hours'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>time '03:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>-</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>interval '2 hours' - time '05:00'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>time '03:00:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>*</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>interval '1 hour' * int '3'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>interval '03:00'</VAR
></TD
></TR
><TR
><TD
> <VAR
CLASS="LITERAL"
>/</VAR
> </TD
><TD
><VAR
CLASS="LITERAL"
>interval '1 hour' / int '3'</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>interval '00:20'</VAR
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-DATETIME-TABLE"
></A
><P
><B
>Table 9-26. Date/Time Functions</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><COL><COL><THEAD
><TR
><TH
>Function</TH
><TH
>Return Type</TH
><TH
>Description</TH
><TH
>Example</TH
><TH
>Result</TH
></TR
></THEAD
><TBODY
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>age</CODE
>(<TT
CLASS="TYPE"
>timestamp</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>Subtract from today</TD
><TD
><VAR
CLASS="LITERAL"
>age(timestamp '1957-06-13')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>43 years 8 mons 3 days</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>age</CODE
>(<TT
CLASS="TYPE"
>timestamp</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>interval</TT
></TD
><TD
>Subtract arguments</TD
><TD
><VAR
CLASS="LITERAL"
>age('2001-04-10', timestamp '1957-06-13')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>43 years 9 mons 27 days</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_date</CODE
></VAR
></TD
><TD
><TT
CLASS="TYPE"
>date</TT
></TD
><TD
>Today's date; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
	</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_time</CODE
></VAR
></TD
><TD
><TT
CLASS="TYPE"
>time with time zone</TT
></TD
><TD
>Time of day; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>current_timestamp</CODE
></VAR
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>Date and time; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
	</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_part</CODE
>(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>Get subfield (equivalent to
	 <CODE
CLASS="FUNCTION"
>extract</CODE
>); see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>Section 9.8.1</A
>
        </TD
><TD
><VAR
CLASS="LITERAL"
>date_part('hour', timestamp '2001-02-16 20:38:40')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>20</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_part</CODE
>(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>interval</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>Get subfield (equivalent to
	 <CODE
CLASS="FUNCTION"
>extract</CODE
>); see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>Section 9.8.1</A
>
        </TD
><TD
><VAR
CLASS="LITERAL"
>date_part('month', interval '2 years 3 months')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>3</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>date_trunc</CODE
>(<TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>timestamp</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>Truncate to specified precision; see also <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-TRUNC"
>Section 9.8.2</A
>
        </TD
><TD
><VAR
CLASS="LITERAL"
>date_trunc('hour', timestamp '2001-02-16 20:38:40')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>2001-02-16 20:00:00+00</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>extract</CODE
>(<VAR
CLASS="PARAMETER"
>field</VAR
> from
         <TT
CLASS="TYPE"
>timestamp</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>Get subfield; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>Section 9.8.1</A
>
        </TD
><TD
><VAR
CLASS="LITERAL"
>extract(hour from timestamp '2001-02-16 20:38:40')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>20</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>extract</CODE
>(<VAR
CLASS="PARAMETER"
>field</VAR
> from
         <TT
CLASS="TYPE"
>interval</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>double precision</TT
></TD
><TD
>Get subfield; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT"
>Section 9.8.1</A
>
        </TD
><TD
><VAR
CLASS="LITERAL"
>extract(month from interval '2 years 3 months')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>3</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>isfinite</CODE
>(<TT
CLASS="TYPE"
>timestamp</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>Test for finite time stamp (not equal to infinity)</TD
><TD
><VAR
CLASS="LITERAL"
>isfinite(timestamp '2001-02-16 21:28:30')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>true</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>isfinite</CODE
>(<TT
CLASS="TYPE"
>interval</TT
>)</VAR
></TD
><TD
><TT
CLASS="TYPE"
>boolean</TT
></TD
><TD
>Test for finite interval</TD
><TD
><VAR
CLASS="LITERAL"
>isfinite(interval '4 hours')</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>true</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>localtime</CODE
></VAR
></TD
><TD
><TT
CLASS="TYPE"
>time</TT
></TD
><TD
>Time of day; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>localtimestamp</CODE
></VAR
></TD
><TD
><TT
CLASS="TYPE"
>timestamp</TT
></TD
><TD
>Date and time; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
        </TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>now</CODE
>()</VAR
></TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>Current date and time (equivalent to
	 <CODE
CLASS="FUNCTION"
>current_timestamp</CODE
>); see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
	</TD
><TD
>&nbsp;</TD
><TD
>&nbsp;</TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>timeofday()</CODE
></VAR
></TD
><TD
><TT
CLASS="TYPE"
>text</TT
></TD
><TD
>Current date and time; see <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-CURRENT"
>Section 9.8.4</A
>
	</TD
><TD
><VAR
CLASS="LITERAL"
>timeofday()</VAR
></TD
><TD
><VAR
CLASS="LITERAL"
>Wed Feb 21 17:01:13.000126 2001 EST</VAR
></TD
></TR
></TBODY
></TABLE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-EXTRACT"
>9.8.1. <CODE
CLASS="FUNCTION"
>EXTRACT</CODE
>, <CODE
CLASS="FUNCTION"
>date_part</CODE
></A
></H2
><PRE
CLASS="SYNOPSIS"
>EXTRACT (<VAR
CLASS="REPLACEABLE"
>field</VAR
> FROM <VAR
CLASS="REPLACEABLE"
>source</VAR
>)</PRE
><P
>    The <CODE
CLASS="FUNCTION"
>extract</CODE
> function retrieves subfields
    from date/time values, such as year or hour.
    <VAR
CLASS="REPLACEABLE"
>source</VAR
> is a value expression that
    evaluates to type <TT
CLASS="TYPE"
>timestamp</TT
> or <TT
CLASS="TYPE"
>interval</TT
>.
    (Expressions of type <TT
CLASS="TYPE"
>date</TT
> or <TT
CLASS="TYPE"
>time</TT
> will
    be cast to <TT
CLASS="TYPE"
>timestamp</TT
> and can therefore be used as
    well.)  <VAR
CLASS="REPLACEABLE"
>field</VAR
> is an identifier or
    string that selects what field to extract from the source value.
    The <CODE
CLASS="FUNCTION"
>extract</CODE
> function returns values of type
    <TT
CLASS="TYPE"
>double precision</TT
>.
    The following are valid field names:

    
    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="LITERAL"
>century</VAR
></DT
><DD
><P
>        The year field divided by 100
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(CENTURY FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>20</SAMP
></PRE
><P
>        Note that the result for the century field is simply the year field
        divided by 100, and not the conventional definition which puts most
        years in the 1900's in the twentieth century.
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>day</VAR
></DT
><DD
><P
>        The day (of the month) field (1 - 31)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DAY FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>16</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>decade</VAR
></DT
><DD
><P
>        The year field divided by 10
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DECADE FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>200</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>dow</VAR
></DT
><DD
><P
>        The day of the week (0 - 6; Sunday is 0) (for
        <TT
CLASS="TYPE"
>timestamp</TT
> values only)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>5</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>doy</VAR
></DT
><DD
><P
>        The day of the year (1 - 365/366) (for <TT
CLASS="TYPE"
>timestamp</TT
> values only)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(DOY FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>47</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>epoch</VAR
></DT
><DD
><P
>        For <TT
CLASS="TYPE"
>date</TT
> and <TT
CLASS="TYPE"
>timestamp</TT
> values, the
        number of seconds since 1970-01-01 00:00:00-00 (can be negative);
	for <TT
CLASS="TYPE"
>interval</TT
> values, the total number
        of seconds in the interval
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(EPOCH FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>982352320</SAMP
>

SELECT EXTRACT(EPOCH FROM INTERVAL '5 days 3 hours');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>442800</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>hour</VAR
></DT
><DD
><P
>        The hour field (0 - 23)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(HOUR FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>20</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>microseconds</VAR
></DT
><DD
><P
>        The seconds field, including fractional parts, multiplied by 1
        000 000.  Note that this includes full seconds.
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MICROSECONDS FROM TIME '17:12:28.5');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>28500000</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>millennium</VAR
></DT
><DD
><P
>        The year field divided by 1000
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MILLENNIUM FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2</SAMP
></PRE
><P
>        Note that the result for the millennium field is simply the year field
        divided by 1000, and not the conventional definition which puts
        years in the 1900's in the second millennium.
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>milliseconds</VAR
></DT
><DD
><P
>        The seconds field, including fractional parts, multiplied by
        1000.  Note that this includes full seconds.
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MILLISECONDS FROM TIME '17:12:28.5');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>28500</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>minute</VAR
></DT
><DD
><P
>        The minutes field (0 - 59)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MINUTE FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>38</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>month</VAR
></DT
><DD
><P
>        For <TT
CLASS="TYPE"
>timestamp</TT
> values, the number of the month
        within the year (1 - 12) ; for <TT
CLASS="TYPE"
>interval</TT
> values
        the number of months, modulo 12 (0 - 11)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(MONTH FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2</SAMP
>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 3 months');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>3</SAMP
>

SELECT EXTRACT(MONTH FROM INTERVAL '2 years 13 months');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>1</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>quarter</VAR
></DT
><DD
><P
>        The quarter of the year (1 - 4) that the day is in (for
        <TT
CLASS="TYPE"
>timestamp</TT
> values only)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(QUARTER FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>1</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>second</VAR
></DT
><DD
><P
>        The seconds field, including fractional parts (0 -
        59<A
NAME="AEN9697"
HREF="#FTN.AEN9697"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(SECOND FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>40</SAMP
>

SELECT EXTRACT(SECOND FROM TIME '17:12:28.5');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>28.5</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>timezone</VAR
></DT
><DD
><P
>        The time zone offset from UTC, measured in seconds.  Positive values
	correspond to time zones east of UTC, negative values to
	zones west of UTC.
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>timezone_hour</VAR
></DT
><DD
><P
>        The hour component of the time zone offset
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>timezone_minute</VAR
></DT
><DD
><P
>        The minute component of the time zone offset
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>week</VAR
></DT
><DD
><P
>        The number of
        the week of the year that the day is in.  By definition
        (<ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
> 8601), the first week of a year
        contains January 4 of that year.  (The <ACRONYM
CLASS="ACRONYM"
>ISO</ACRONYM
>-8601
        week starts on Monday.)  In other words, the first Thursday of
        a year is in week 1 of that year. (for <TT
CLASS="TYPE"
>timestamp</TT
> values only)
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(WEEK FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>7</SAMP
></PRE
></DD
><DT
><VAR
CLASS="LITERAL"
>year</VAR
></DT
><DD
><P
>        The year field
       </P
><PRE
CLASS="SCREEN"
>SELECT EXTRACT(YEAR FROM TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001</SAMP
></PRE
></DD
></DL
></DIV
><P>

   </P
><P
>    The <CODE
CLASS="FUNCTION"
>extract</CODE
> function is primarily intended
    for computational processing.  For formatting date/time values for
    display, see <A
HREF="functions-formatting.html"
>Section 9.7</A
>.
   </P
><P
>    The <CODE
CLASS="FUNCTION"
>date_part</CODE
> function is modeled on the traditional
    <SPAN
CLASS="PRODUCTNAME"
>Ingres</SPAN
> equivalent to the
    <ACRONYM
CLASS="ACRONYM"
>SQL</ACRONYM
>-standard function <CODE
CLASS="FUNCTION"
>extract</CODE
>:
</P><PRE
CLASS="SYNOPSIS"
>date_part('<VAR
CLASS="REPLACEABLE"
>field</VAR
>', <VAR
CLASS="REPLACEABLE"
>source</VAR
>)</PRE
><P>
    Note that here the <VAR
CLASS="REPLACEABLE"
>field</VAR
> parameter needs to
    be a string value, not a name.  The valid field names for
    <CODE
CLASS="FUNCTION"
>date_part</CODE
> are the same as for
    <CODE
CLASS="FUNCTION"
>extract</CODE
>.
   </P
><PRE
CLASS="SCREEN"
>SELECT date_part('day', TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>16</SAMP
>

SELECT date_part('hour', INTERVAL '4 hours 3 minutes');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>4</SAMP
></PRE
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-TRUNC"
>9.8.2. <CODE
CLASS="FUNCTION"
>date_trunc</CODE
></A
></H2
><P
>    The function <CODE
CLASS="FUNCTION"
>date_trunc</CODE
> is conceptually
    similar to the <CODE
CLASS="FUNCTION"
>trunc</CODE
> function for numbers.
   </P
><P
></P><PRE
CLASS="SYNOPSIS"
>date_trunc('<VAR
CLASS="REPLACEABLE"
>field</VAR
>', <VAR
CLASS="REPLACEABLE"
>source</VAR
>)</PRE
><P>
    <VAR
CLASS="REPLACEABLE"
>source</VAR
> is a value expression of type
    <TT
CLASS="TYPE"
>timestamp</TT
>.  (Values of type <TT
CLASS="TYPE"
>date</TT
> and
    <TT
CLASS="TYPE"
>time</TT
> are cast automatically.)
    <VAR
CLASS="REPLACEABLE"
>field</VAR
> selects to which precision to
    truncate the time stamp value.  The return value is of type
    <TT
CLASS="TYPE"
>timestamp</TT
> with all fields that are less than the
    selected one set to zero (or one, for day and month).
   </P
><P
>    Valid values for <VAR
CLASS="REPLACEABLE"
>field</VAR
> are:
    <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><VAR
CLASS="LITERAL"
>microseconds</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>milliseconds</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>second</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>minute</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>hour</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>day</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>month</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>year</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>decade</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>century</VAR
></TD
></TR
><TR
><TD
><VAR
CLASS="LITERAL"
>millennium</VAR
></TD
></TR
></TBODY
></TABLE
><P
></P
>
   </P
><P
>    Examples:
</P><PRE
CLASS="SCREEN"
>SELECT date_trunc('hour', TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-02-16 20:00:00+00</SAMP
>

SELECT date_trunc('year', TIMESTAMP '2001-02-16 20:38:40');
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-01-01 00:00:00+00</SAMP
></PRE
><P>
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-ZONECONVERT"
>9.8.3. <VAR
CLASS="LITERAL"
>AT TIME ZONE</VAR
></A
></H2
><A
NAME="AEN9807"
></A
><P
>    The <VAR
CLASS="LITERAL"
>AT TIME ZONE</VAR
> construct allows conversions
    of time stamps to different time zones.  <A
HREF="functions-datetime.html#FUNCTIONS-DATETIME-ZONECONVERT-TABLE"
>Table 9-27</A
> shows its
    variants.
   </P
><DIV
CLASS="TABLE"
><A
NAME="FUNCTIONS-DATETIME-ZONECONVERT-TABLE"
></A
><P
><B
>Table 9-27. <VAR
CLASS="LITERAL"
>AT TIME ZONE</VAR
> Variants</B
></P
><TABLE
BORDER="1"
CLASS="CALSTABLE"
><COL><COL><COL><THEAD
><TR
><TH
>Expression</TH
><TH
>Return Type</TH
><TH
>Description</TH
></TR
></THEAD
><TBODY
><TR
><TD
>	 <VAR
CLASS="LITERAL"
><TT
CLASS="TYPE"
>timestamp without time zone</TT
> AT TIME ZONE <VAR
CLASS="REPLACEABLE"
>zone</VAR
></VAR
>
	</TD
><TD
><TT
CLASS="TYPE"
>timestamp with time zone</TT
></TD
><TD
>Convert local time in given time zone to UTC</TD
></TR
><TR
><TD
>	 <VAR
CLASS="LITERAL"
><TT
CLASS="TYPE"
>timestamp with time zone</TT
> AT TIME ZONE <VAR
CLASS="REPLACEABLE"
>zone</VAR
></VAR
>
	</TD
><TD
><TT
CLASS="TYPE"
>timestamp without time zone</TT
></TD
><TD
>Convert UTC to local time in given time zone</TD
></TR
><TR
><TD
>	 <VAR
CLASS="LITERAL"
><TT
CLASS="TYPE"
>time with time zone</TT
> AT TIME ZONE <VAR
CLASS="REPLACEABLE"
>zone</VAR
></VAR
>
	</TD
><TD
><TT
CLASS="TYPE"
>time with time zone</TT
></TD
><TD
>Convert local time across time zones</TD
></TR
></TBODY
></TABLE
></DIV
><P
>    In these expressions, the desired time zone <VAR
CLASS="REPLACEABLE"
>zone</VAR
> can be
    specified either as a text string (e.g., <VAR
CLASS="LITERAL"
>'PST'</VAR
>)
    or as an interval (e.g., <VAR
CLASS="LITERAL"
>INTERVAL '-08:00'</VAR
>).
   </P
><P
>    Examples (supposing that the local time zone is <VAR
CLASS="LITERAL"
>PST8PDT</VAR
>):
</P><PRE
CLASS="SCREEN"
>SELECT TIMESTAMP '2001-02-16 20:38:40' AT TIME ZONE 'MST';
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-02-16 19:38:40-08</SAMP
>

SELECT TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40-05' AT TIME ZONE 'MST';
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-02-16 18:38:40</SAMP
></PRE
><P>
    The first example takes a zone-less time stamp and interprets it as MST time
    (UTC-7) to produce a UTC time stamp, which is then rotated to PST (UTC-8)
    for display.  The second example takes a time stamp specified in EST
    (UTC-5) and converts it to local time in MST (UTC-7).
   </P
><P
>    The function <VAR
CLASS="LITERAL"
><CODE
CLASS="FUNCTION"
>timezone</CODE
>(<VAR
CLASS="REPLACEABLE"
>zone</VAR
>,
    <VAR
CLASS="REPLACEABLE"
>timestamp</VAR
>)</VAR
> is equivalent to the SQL-conforming construct
    <VAR
CLASS="LITERAL"
><VAR
CLASS="REPLACEABLE"
>timestamp</VAR
> AT TIME ZONE
    <VAR
CLASS="REPLACEABLE"
>zone</VAR
></VAR
>. 
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="FUNCTIONS-DATETIME-CURRENT"
>9.8.4. Current Date/Time</A
></H2
><A
NAME="AEN9868"
></A
><A
NAME="AEN9871"
></A
><P
>    The following functions are available to obtain the current date and/or
    time:
</P><PRE
CLASS="SYNOPSIS"
>CURRENT_DATE
CURRENT_TIME
CURRENT_TIMESTAMP
CURRENT_TIME ( <VAR
CLASS="REPLACEABLE"
>precision</VAR
> )
CURRENT_TIMESTAMP ( <VAR
CLASS="REPLACEABLE"
>precision</VAR
> )
LOCALTIME
LOCALTIMESTAMP
LOCALTIME ( <VAR
CLASS="REPLACEABLE"
>precision</VAR
> )
LOCALTIMESTAMP ( <VAR
CLASS="REPLACEABLE"
>precision</VAR
> )</PRE
><P>
    </P
><P
>     <CODE
CLASS="FUNCTION"
>CURRENT_TIME</CODE
> and
     <CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
> deliver values with time zone;
     <CODE
CLASS="FUNCTION"
>LOCALTIME</CODE
> and
     <CODE
CLASS="FUNCTION"
>LOCALTIMESTAMP</CODE
> deliver values without time zone.
    </P
><P
>     <CODE
CLASS="FUNCTION"
>CURRENT_TIME</CODE
>,
     <CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
>,
     <CODE
CLASS="FUNCTION"
>LOCALTIME</CODE
>, and
     <CODE
CLASS="FUNCTION"
>LOCALTIMESTAMP</CODE
>
     can optionally be given
     a precision parameter, which causes the result to be rounded
     to that many fractional digits in the seconds field.  Without a precision parameter,
     the result is given to the full available precision.
    </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>      Prior to <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> 7.2, the precision
      parameters were unimplemented, and the result was always given
      in integer seconds.
     </P
></BLOCKQUOTE
></DIV
><P
>    Some examples:
</P><PRE
CLASS="SCREEN"
>SELECT CURRENT_TIME;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>14:39:53.662522-05</SAMP
>

SELECT CURRENT_DATE;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23</SAMP
>

SELECT CURRENT_TIMESTAMP;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23 14:39:53.662522-05</SAMP
>

SELECT CURRENT_TIMESTAMP(2);
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23 14:39:53.66-05</SAMP
>

SELECT LOCALTIMESTAMP;
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>2001-12-23 14:39:53.662522</SAMP
></PRE
><P>
   </P
><P
>    The function <CODE
CLASS="FUNCTION"
>now()</CODE
> is the traditional
    <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> equivalent to
    <CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
>.
   </P
><P
>    There is also the function <CODE
CLASS="FUNCTION"
>timeofday()</CODE
>, which for historical
    reasons returns a <TT
CLASS="TYPE"
>text</TT
> string rather than a <TT
CLASS="TYPE"
>timestamp</TT
> value:
</P><PRE
CLASS="SCREEN"
>SELECT timeofday();
<I
CLASS="LINEANNOTATION"
>Result: </I
><SAMP
CLASS="COMPUTEROUTPUT"
>Sat Feb 17 19:07:32.000126 2001 EST</SAMP
></PRE
><P>
   </P
><P
>    It is important to know that
    <CODE
CLASS="FUNCTION"
>CURRENT_TIMESTAMP</CODE
> and related functions return
    the start time of the current transaction; their values do not
    change during the transaction. This is considered a feature:
    the intent is to allow a single transaction to have a consistent
    notion of the <SPAN
CLASS="QUOTE"
>"current"</SPAN
> time, so that multiple
    modifications within the same transaction bear the same
    timestamp. <CODE
CLASS="FUNCTION"
>timeofday()</CODE
>
    returns the wall-clock time and does advance during transactions.
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>     Other database systems may advance these values more
     frequently.
    </P
></BLOCKQUOTE
></DIV
><P
>    All the date/time data types also accept the special literal value
    <VAR
CLASS="LITERAL"
>now</VAR
> to specify the current date and time.  Thus,
    the following three all return the same result:
</P><PRE
CLASS="PROGRAMLISTING"
>SELECT CURRENT_TIMESTAMP;
SELECT now();
SELECT TIMESTAMP 'now';</PRE
><P>
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>      You do not want to use the third form when specifying a <VAR
CLASS="LITERAL"
>DEFAULT</VAR
>
      clause while creating a table.  The system will convert <VAR
CLASS="LITERAL"
>now</VAR
>
      to a <TT
CLASS="TYPE"
>timestamp</TT
> as soon as the constant is parsed, so that when
      the default value is needed,
      the time of the table creation would be used!  The first two
      forms will not be evaluated until the default value is used,
      because they are function calls.  Thus they will give the desired
      behavior of defaulting to the time of row insertion.
     </P
></BLOCKQUOTE
></DIV
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN9697"
HREF="functions-datetime.html#AEN9697"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>60 if leap seconds are
        implemented by the operating system</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="functions-formatting.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="functions-geometry.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Data Type Formatting Functions</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="functions.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Geometric Functions and Operators</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>