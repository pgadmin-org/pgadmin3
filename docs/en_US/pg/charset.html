<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 20. Localization</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.0beta5 Documentation">
<link rel="up" href="admin.html" title="Part III. Server Administration">
<link rel="previous" href="client-authentication-problems.html" title="19.3. Authentication problems">
<link rel="next" href="multibyte.html" title="20.2. Character Set Support">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="en" id="charset">
<div class="titlepage">
<div><div><h2 class="title">
<a name="charset"></a>Chapter 20. Localization</h2></div></div>
<div></div>
</div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="charset.html#locale">20.1. Locale Support</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="charset.html#id2594623">20.1.1. Overview</a></span></dt>
<dt><span class="sect2"><a href="charset.html#id2594939">20.1.2. Benefits</a></span></dt>
<dt><span class="sect2"><a href="charset.html#id2594987">20.1.3. Problems</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="multibyte.html">20.2. Character Set Support</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="multibyte.html#multibyte-charset-supported">20.2.1. Supported Character Sets</a></span></dt>
<dt><span class="sect2"><a href="multibyte.html#id2595604">20.2.2. Setting the Character Set</a></span></dt>
<dt><span class="sect2"><a href="multibyte.html#id2595731">20.2.3. Automatic Character Set Conversion Between Server and Client</a></span></dt>
<dt><span class="sect2"><a href="multibyte.html#id2596994">20.2.4. Further Reading</a></span></dt>
</dl></dd>
</dl>
</div>
<p>  This chapter describes the available localization features from the
  point of view of the administrator.
  <span class="productname">PostgreSQL</span> supports localization with
  two approaches:

   </p>
<div class="itemizedlist"><ul type="disc">
<li><p>      Using the locale features of the operating system to provide
      locale-specific collation order, number formatting, translated
      messages, and other aspects.
     </p></li>
<li><p>      Providing a number of different character sets defined in the
      <span class="productname">PostgreSQL</span> server, including
      multiple-byte character sets, to support storing text in all
      kinds of languages, and providing character set translation between
      client and server.
     </p></li>
</ul></div>
<p>
  </p>
<div class="sect1" lang="en">
<div class="titlepage">
<div><div><h2 class="title" style="clear: both">
<a name="locale"></a>20.1. Locale Support</h2></div></div>
<div></div>
</div>
<a name="id2594594"></a><p>   <i class="firstterm">Locale</i> support refers to an application respecting
   cultural preferences regarding alphabets, sorting, number
   formatting, etc.  <span class="productname">PostgreSQL</span> uses the standard ISO
   C and <span class="acronym">POSIX</span> locale facilities provided by the server operating
   system.  For additional information refer to the documentation of your
   system.
  </p>
<div class="sect2" lang="en">
<div class="titlepage">
<div><div><h3 class="title">
<a name="id2594623"></a>20.1.1. Overview</h3></div></div>
<div></div>
</div>
<p>    Locale support is automatically initialized when a database
    cluster is created using <tt class="command">initdb</tt>.
    <tt class="command">initdb</tt> will initialize the database cluster
    with the locale setting of its execution environment by default,
    so if your system is already set to use the locale that you want
    in your database cluster then there is nothing else you need to
    do.  If you want to use a different locale (or you are not sure
    which locale your system is set to), you can instruct
    <tt class="command">initdb</tt> exactly which locale to use by
    specifying the <tt class="option">--locale</tt> option. For example:
</p>
<pre class="screen">initdb --locale=sv_SE</pre>
<p>
   </p>
<p>    This example sets the locale to Swedish (<tt class="literal">sv</tt>) as spoken
    in Sweden (<tt class="literal">SE</tt>).  Other possibilities might be
    <tt class="literal">en_US</tt> (U.S. English) and <tt class="literal">fr_CA</tt> (French
    Canadian).  If more than one character set can be useful for a
    locale then the specifications look like this:
    <tt class="literal">cs_CZ.ISO8859-2</tt>. What locales are available under what
    names on your system depends on what was provided by the operating
    system vendor and what was installed.
   </p>
<p>    Occasionally it is useful to mix rules from several locales, e.g.,
    use English collation rules but Spanish messages.  To support that, a
    set of locale subcategories exist that control only a certain
    aspect of the localization rules.

    </p>
<div class="informaltable"><table border="1">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td><tt class="envar">LC_COLLATE</tt></td>
<td>String sort order</td>
</tr>
<tr>
<td><tt class="envar">LC_CTYPE</tt></td>
<td>Character classification (What is a letter? The upper-case equivalent?)</td>
</tr>
<tr>
<td><tt class="envar">LC_MESSAGES</tt></td>
<td>Language of messages</td>
</tr>
<tr>
<td><tt class="envar">LC_MONETARY</tt></td>
<td>Formatting of currency amounts</td>
</tr>
<tr>
<td><tt class="envar">LC_NUMERIC</tt></td>
<td>Formatting of numbers</td>
</tr>
<tr>
<td><tt class="envar">LC_TIME</tt></td>
<td>Formatting of dates and times</td>
</tr>
</tbody>
</table></div>
<p>

    The category names translate into names of
    <tt class="command">initdb</tt> options to override the locale choice
    for a specific category.  For instance, to set the locale to
    French Canadian, but use U.S. rules for formatting currency, use
    <tt class="literal">initdb --locale=fr_CA --lc-monetary=en_US</tt>.
   </p>
<p>    If you want the system to behave as if it had no locale support,
    use the special locale <tt class="literal">C</tt> or <tt class="literal">POSIX</tt>.
   </p>
<p>    The nature of some locale categories is that their value has to be
    fixed for the lifetime of a database cluster.  That is, once
    <tt class="command">initdb</tt> has run, you cannot change them anymore.
    <tt class="literal">LC_COLLATE</tt> and <tt class="literal">LC_CTYPE</tt> are
    those categories.  They affect the sort order of indexes, so they
    must be kept fixed, or indexes on text columns will become corrupt.
    <span class="productname">PostgreSQL</span> enforces this by recording
    the values of <tt class="envar">LC_COLLATE</tt> and <tt class="envar">LC_CTYPE</tt> that are
    seen by <tt class="command">initdb</tt>.  The server automatically adopts
    those two values when it is started.
   </p>
<p>    The other locale categories can be changed as desired whenever the
    server is running by setting the run-time configuration variables
    that have the same name as the locale categories (see <a href="runtime-config.html#runtime-config-client-format" title="16.4.8.2. Locale and Formatting">Section 16.4.8.2, &#8220;Locale and Formatting&#8221;</a> for details).  The defaults that are
    chosen by <tt class="command">initdb</tt> are actually only written into
    the configuration file <tt class="filename">postgresql.conf</tt> to
    serve as defaults when the server is started.  If you delete the
    assignments from <tt class="filename">postgresql.conf</tt> then the
    server will inherit the settings from the execution environment.
   </p>
<p>    Note that the locale behavior of the server is determined by the
    environment variables seen by the server, not by the environment
    of any client.  Therefore, be careful to configure the correct locale settings
    before starting the server.  A consequence of this is that if
    client and server are set up to different locales, messages may
    appear in different languages depending on where they originated.
   </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>     When we speak of inheriting the locale from the execution
     environment, this means the following on most operating systems:
     For a given locale category, say the collation, the following
     environment variables are consulted in this order until one is
     found to be set: <tt class="envar">LC_ALL</tt>, <tt class="envar">LC_COLLATE</tt>
     (the variable corresponding to the respective category),
     <tt class="envar">LANG</tt>.  If none of these environment variables are
     set then the locale defaults to <tt class="literal">C</tt>.
    </p>
<p>     Some message localization libraries also look at the environment
     variable <tt class="envar">LANGUAGE</tt> which overrides all other locale
     settings for the purpose of setting the language of messages.  If
     in doubt, please refer to the documentation of your operating
     system, in particular the documentation about
     <span class="application">gettext</span>, for more information.
    </p>
</div>
<p>    To enable messages translated to the user's preferred language,
    <span class="acronym">NLS</span> must have been enabled at build time.  This
    choice is independent of the other locale support.
   </p>
</div>
<div class="sect2" lang="en">
<div class="titlepage">
<div><div><h3 class="title">
<a name="id2594939"></a>20.1.2. Benefits</h3></div></div>
<div></div>
</div>
<p>    Locale support influences in particular the following features:

    </p>
<div class="itemizedlist"><ul type="disc">
<li><p>       Sort order in queries using <tt class="literal">ORDER BY</tt>
       <a name="id2594957"></a>
      </p></li>
<li><p>       The <tt class="function">to_char</tt> family of functions
      </p></li>
</ul></div>
<p>
   </p>
<p>    The only severe drawback of using the locale support in
    <span class="productname">PostgreSQL</span> is its speed.  So use locales only if
    you actually need them.
   </p>
</div>
<div class="sect2" lang="en">
<div class="titlepage">
<div><div><h3 class="title">
<a name="id2594987"></a>20.1.3. Problems</h3></div></div>
<div></div>
</div>
<p>    If locale support doesn't work in spite of the explanation above,
    check that the locale support in your operating system is
    correctly configured.  To check what locales are installed on your
    system, you may use the command <tt class="literal">locale -a</tt> if
    your operating system provides it.
   </p>
<p>    Check that <span class="productname">PostgreSQL</span> is actually using the locale
    that you think it is.  <tt class="envar">LC_COLLATE</tt> and <tt class="envar">LC_CTYPE</tt>
    settings are determined at <tt class="command">initdb</tt> time and cannot be
    changed without repeating <tt class="command">initdb</tt>.  Other locale
    settings including <tt class="envar">LC_MESSAGES</tt> and <tt class="envar">LC_MONETARY</tt>
    are initially determined by the environment the server is started
    in.  You can check the <tt class="envar">LC_COLLATE</tt> and <tt class="envar">LC_CTYPE</tt>
    settings of a database using the <tt class="command">SHOW</tt> command.
   </p>
<p>    The directory <tt class="filename">src/test/locale</tt> in the source
    distribution contains a test suite for
    <span class="productname">PostgreSQL</span>'s locale support.
   </p>
<p>    Client applications that handle server-side errors by parsing the
    text of the error message will obviously have problems when the
    server's messages are in a different language.  Authors of such
    applications are advised to make use of the error code scheme
    instead.
   </p>
<p>    Maintaining catalogs of message translations requires the on-going
    efforts of many volunteers that want to see
    <span class="productname">PostgreSQL</span> speak their preferred language well.
    If messages in your language is currently not available or fully
    translated, your assistance would be appreciated.  If you want to
    help, refer to the <a href="nls.html" title="Chapter 44. Native Language Support">Chapter 44, <i>Native Language Support</i></a> or write to the developers'
    mailing list.
   </p>
</div>
</div>
</div></body>
</html>
