<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>CREATE VIEW</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.4beta1 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="SQL Commands"
HREF="sql-commands.html"><LINK
REL="PREVIOUS"
TITLE="CREATE USER"
HREF="sql-createuser.html"><LINK
REL="NEXT"
TITLE="DEALLOCATE"
HREF="sql-deallocate.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-08-05T05:04:12"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.4beta1 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="sql-createuser.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sql-deallocate.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SQL-CREATEVIEW"
></A
>CREATE VIEW</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN40445"
></A
><H2
>Name</H2
>CREATE VIEW&nbsp;--&nbsp;define a new view</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN40448"
></A
><H2
>Synopsis</H2
><PRE
CLASS="SYNOPSIS"
>CREATE [ OR REPLACE ] VIEW <VAR
CLASS="REPLACEABLE"
>name</VAR
> [ ( <VAR
CLASS="REPLACEABLE"
>column_name</VAR
> [, ...] ) ] AS <VAR
CLASS="REPLACEABLE"
>query</VAR
></PRE
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN40453"
></A
><H2
>Description</H2
><P
>   <TT
CLASS="COMMAND"
>CREATE VIEW</TT
> defines a view of a query.  The view
   is not physically materialized. Instead, the query is run everytime
   the view is referenced in a query.
  </P
><P
>   <TT
CLASS="COMMAND"
>CREATE OR REPLACE VIEW</TT
> is similar, but if a view
   of the same name already exists, it is replaced.  You can only replace
   a view with a new query that generates the identical set of columns
   (i.e., same column names and data types).
  </P
><P
>   If a schema name is given (for example, <VAR
CLASS="LITERAL"
>CREATE VIEW
   myschema.myview ...</VAR
>) then the view is created in the
   specified schema.  Otherwise it is created in the current schema.
   The view name must be distinct from the name of any other view, table,
   sequence, or index in the same schema.
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN40461"
></A
><H2
>Parameters</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="REPLACEABLE"
>name</VAR
></DT
><DD
><P
>      The name (optionally schema-qualified) of a view to be created.
     </P
></DD
><DT
><VAR
CLASS="REPLACEABLE"
>column_name</VAR
></DT
><DD
><P
>      An optional list of names to be used for columns of the view.
      If not given, the column names are deduced from the query.
     </P
></DD
><DT
><VAR
CLASS="REPLACEABLE"
>query</VAR
></DT
><DD
><P
>      A query (that is, a <TT
CLASS="COMMAND"
>SELECT</TT
> statement) which will
      provide the columns and rows of the view.
     </P
><P
>      Refer to <A
HREF="sql-select.html"
><I
>SELECT</I
></A
>
      for more information about valid queries.
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN40482"
></A
><H2
>Diagnostics</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><SAMP
CLASS="COMPUTEROUTPUT"
>CREATE VIEW</SAMP
></DT
><DD
><P
>      Message returned if the view was successfully created.
     </P
></DD
><DT
><SAMP
CLASS="COMPUTEROUTPUT"
>WARNING:  Attribute '<VAR
CLASS="REPLACEABLE"
>column</VAR
>' has an unknown type</SAMP
></DT
><DD
><P
>      The view will be created having a column with an unknown type if
      you do not specify it. For example, the following command gives
      this warning:
</P><PRE
CLASS="PROGRAMLISTING"
>CREATE VIEW vista AS SELECT 'Hello World'</PRE
><P>
      whereas this command does not:
</P><PRE
CLASS="PROGRAMLISTING"
>CREATE VIEW vista AS SELECT text 'Hello World'</PRE
><P>
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN40498"
></A
><H2
>Notes</H2
><P
>    Currently, views are read only: the system will not allow an insert,
    update, or delete on a view.  You can get the effect of an updatable
    view by creating rules that rewrite inserts, etc. on the view into
    appropriate actions on other tables.  For more information see
    <A
HREF="sql-createrule.html"
><I
>CREATE RULE</I
></A
>.
   </P
><P
>    Use the <TT
CLASS="COMMAND"
>DROP VIEW</TT
> statement to drop views.
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN40504"
></A
><H2
>Examples</H2
><P
>   Create a view consisting of all comedy films:

</P><PRE
CLASS="PROGRAMLISTING"
>CREATE VIEW comedies AS
    SELECT *
    FROM films
    WHERE kind = 'Comedy';</PRE
><P>
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN40508"
></A
><H2
>Compatibility</H2
><P
>   The SQL standard specifies some additional capabilities for the
   <TT
CLASS="COMMAND"
>CREATE VIEW</TT
> statement:
</P><PRE
CLASS="SYNOPSIS"
>CREATE VIEW <VAR
CLASS="REPLACEABLE"
>name</VAR
> [ ( <VAR
CLASS="REPLACEABLE"
>column</VAR
> [, ...] ) ]
    AS query
    [ WITH [ CASCADE | LOCAL ] CHECK OPTION ]</PRE
><P>
  </P
><P
>   The optional clauses for the full SQL command are:

   <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="LITERAL"
>CHECK OPTION</VAR
></DT
><DD
><P
>        This option is to do with updatable views.  All
        <TT
CLASS="COMMAND"
>INSERT</TT
> and <TT
CLASS="COMMAND"
>UPDATE</TT
> commands on the view
        will be checked to ensure data satisfy the view-defining
        condition (that is, the new data would be visible through the
        view). If they do not, the update will be rejected.
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>LOCAL</VAR
></DT
><DD
><P
>        Check for integrity on this view.
       </P
></DD
><DT
><VAR
CLASS="LITERAL"
>CASCADE</VAR
></DT
><DD
><P
>        Check for integrity on this view and on any dependent
        view. <VAR
CLASS="LITERAL"
>CASCADE</VAR
> is assumed if neither
        <VAR
CLASS="LITERAL"
>CASCADE</VAR
> nor <VAR
CLASS="LITERAL"
>LOCAL</VAR
> is specified.
       </P
></DD
></DL
></DIV
><P>
  </P
><P
>   <TT
CLASS="COMMAND"
>CREATE OR REPLACE VIEW</TT
> is a
   <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> language extension.
  </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="sql-createuser.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sql-deallocate.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>CREATE USER</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="sql-commands.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>DEALLOCATE</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>