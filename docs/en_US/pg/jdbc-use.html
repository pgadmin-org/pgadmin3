<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Initializing the Driver</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.4beta1 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="JDBC Interface"
HREF="jdbc.html"><LINK
REL="PREVIOUS"
TITLE="JDBC Interface"
HREF="jdbc.html"><LINK
REL="NEXT"
TITLE="Issuing a Query and Processing the Result"
HREF="jdbc-query.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-08-05T05:04:12"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.4beta1 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="jdbc.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 31. <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
> Interface</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="jdbc-query.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="JDBC-USE"
>31.2. Initializing the Driver</A
></H1
><P
>   This section describes how to load and initialize the <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
>
   driver in your programs.
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="JDBC-IMPORT"
>31.2.1. Importing <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
></A
></H2
><P
>    Any source that uses <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
> needs to import the
    <VAR
CLASS="LITERAL"
>java.sql</VAR
> package, using:

</P><PRE
CLASS="PROGRAMLISTING"
>import java.sql.*;</PRE
><P>
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>      Do not import the <VAR
CLASS="LITERAL"
>org.postgresql</VAR
> package. If
      you do, your source will not compile, as
      <TT
CLASS="COMMAND"
>javac</TT
> will get confused.
     </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="JDBC-LOAD"
>31.2.2. Loading the Driver</A
></H2
><P
>    Before you can connect to a database, you need to load the
    driver. There are two methods available, and it depends on your
    code which is the best one to use.
   </P
><P
>    In the first method, your code implicitly loads the driver using the
    <CODE
CLASS="FUNCTION"
>Class.forName()</CODE
> method.
    For <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>, you would use:

</P><PRE
CLASS="PROGRAMLISTING"
>Class.forName("org.postgresql.Driver");</PRE
><P>

    This will load the driver, and while loading, the driver will automatically
    register itself with <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
>.
   </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>      The <CODE
CLASS="FUNCTION"
>forName()</CODE
> method can throw a
      <CODE
CLASS="CLASSNAME"
>ClassNotFoundException</CODE
> if the driver is
      not available.
     </P
></BLOCKQUOTE
></DIV
><P
>    This is the most common method to use, but restricts your code to
    use just <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>.  If your code may
    access another database system in the future, and you do not use
    any <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>-specific extensions, then
    the second method is advisable.
   </P
><P
>    The second method passes the driver as a parameter to the
    <ACRONYM
CLASS="ACRONYM"
>JVM</ACRONYM
> as it starts, using the <VAR
CLASS="OPTION"
>-D</VAR
>
    argument. Example:
</P><PRE
CLASS="PROGRAMLISTING"
>java -Djdbc.drivers=org.postgresql.Driver example.ImageViewer</PRE
><P>
    In this example, the <ACRONYM
CLASS="ACRONYM"
>JVM</ACRONYM
> will attempt to load
    the driver as part of its initialization. Once done, the
    <CODE
CLASS="CLASSNAME"
>ImageViewer</CODE
> is started.
   </P
><P
>    Now, this method is the better one to use because it allows your
    code to be used with other database packages without recompiling
    the code. The only thing that would also change is the connection
    <ACRONYM
CLASS="ACRONYM"
>URL</ACRONYM
>, which is covered next.
   </P
><P
>    One last thing: When your code then tries to open a
    <CODE
CLASS="CLASSNAME"
>Connection</CODE
>, and you get a <SPAN
CLASS="ERRORNAME"
>No
    driver available</SPAN
> <CODE
CLASS="CLASSNAME"
>SQLException</CODE
>
    being thrown, this is probably caused by the driver not being in
    the class path, or the value in the parameter not being correct.
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="JDBC-CONNECT"
>31.2.3. Connecting to the Database</A
></H2
><P
>    With <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
>, a database is represented by a
    <ACRONYM
CLASS="ACRONYM"
>URL</ACRONYM
> (Uniform Resource Locator).  With
    <SPAN
CLASS="APPLICATION"
>PostgreSQL</SPAN
>, this takes one of the
    following forms:

    <P
></P
></P><UL
><LI
><PRE
CLASS="SYNOPSIS"
>jdbc:postgresql:<VAR
CLASS="REPLACEABLE"
>database</VAR
></PRE
></LI
><LI
><PRE
CLASS="SYNOPSIS"
>jdbc:postgresql://<VAR
CLASS="REPLACEABLE"
>host</VAR
>/<VAR
CLASS="REPLACEABLE"
>database</VAR
></PRE
></LI
><LI
><PRE
CLASS="SYNOPSIS"
>jdbc:postgresql://<VAR
CLASS="REPLACEABLE"
>host</VAR
>:<VAR
CLASS="REPLACEABLE"
>port</VAR
>/<VAR
CLASS="REPLACEABLE"
>database</VAR
></PRE
></LI
></UL
><P>

    The parametes have the following meanings:

    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="REPLACEABLE"
>host</VAR
></DT
><DD
><P
>        The host name of the server. Defaults to <VAR
CLASS="LITERAL"
>localhost</VAR
>.  To specify an IPv6 address your must enclose the <VAR
CLASS="REPLACEABLE"
>host</VAR
> parameter with square brackets, for example:
</P><PRE
CLASS="PROGRAMLISTING"
>jdbc:postgresql://[::1]:5740/accounting</PRE
><P>
       </P
></DD
><DT
><VAR
CLASS="REPLACEABLE"
>port</VAR
></DT
><DD
><P
>        The port number the server is listening on. Defaults to the
        <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> standard port number (5432).
       </P
></DD
><DT
><VAR
CLASS="REPLACEABLE"
>database</VAR
></DT
><DD
><P
>        The database name.
       </P
></DD
></DL
></DIV
><P>
   </P
><P
>    To connect, you need to get a <CODE
CLASS="CLASSNAME"
>Connection</CODE
> instance from 
    <ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
>. To do this,
    you use the <CODE
CLASS="FUNCTION"
>DriverManager.getConnection()</CODE
> method:

</P><PRE
CLASS="PROGRAMLISTING"
>Connection db = DriverManager.getConnection(url, username, password);</PRE
><P>
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="JDBC-DISCONNECT"
>31.2.4. Closing the Connection</A
></H2
><P
>    To close the database connection, simply call the
    <CODE
CLASS="FUNCTION"
>close()</CODE
> method to the <CODE
CLASS="CLASSNAME"
>Connection</CODE
>:
</P><PRE
CLASS="PROGRAMLISTING"
>db.close();</PRE
><P>
   </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="jdbc.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="jdbc-query.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><ACRONYM
CLASS="ACRONYM"
>JDBC</ACRONYM
> Interface</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="jdbc.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Issuing a Query and Processing the Result</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>