<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>vacuumdb</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.4beta1 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="PostgreSQL Client Applications"
HREF="reference-client.html"><LINK
REL="PREVIOUS"
TITLE="psql"
HREF="app-psql.html"><LINK
REL="NEXT"
TITLE="PostgreSQL Server Applications"
HREF="reference-server.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-08-05T05:04:12"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PostgreSQL 7.4beta1 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="app-psql.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="reference-server.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="APP-VACUUMDB"
></A
><SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN48672"
></A
><H2
>Name</H2
>vacuumdb&nbsp;--&nbsp;garbage-collect and analyze a <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> database</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN48676"
></A
><H2
>Synopsis</H2
><P
><TT
CLASS="COMMAND"
>vacuumdb</TT
> [<VAR
CLASS="REPLACEABLE"
>connection-option</VAR
>...] [--full | -f] [--verbose | -v] [--analyze | -z] [--table | -t <VAR
CLASS="REPLACEABLE"
>table</VAR
>
     [( <VAR
CLASS="REPLACEABLE"
>column</VAR
> [,...] )]
   ] [<VAR
CLASS="REPLACEABLE"
>dbname</VAR
>]<BR><TT
CLASS="COMMAND"
>vacuumdb</TT
> [<VAR
CLASS="REPLACEABLE"
>connection-options</VAR
>...] [--all | -a] [--full | -f] [--verbose | -v] [--analyze | -z]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN48712"
></A
><H2
>Description</H2
><P
>   <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> is a utility for cleaning a
   <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> database.
   <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> will also generate internal statistics
   used by the <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> query optimizer.
  </P
><P
>   <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> is a wrapper around the SQL
   command <A
HREF="sql-vacuum.html"
><I
>VACUUM</I
></A
>.
   There is no effective difference between vacuuming databases via
   this or other methods.  The database server must be running at the
   targeted host.  Also, any default settings and environment
   variables used by the <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> front-end
   library will apply.
  </P
><P
>  <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> might need to connect several
  times to the <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> server, asking for
  a password each time. It is convenient to have a
  <TT
CLASS="FILENAME"
>$HOME/.pgpass</TT
> file in such cases.
  </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN48727"
></A
><H2
>Options</H2
><P
>    <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> accepts the following command-line arguments:
    
    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="OPTION"
>-a</VAR
><BR><VAR
CLASS="OPTION"
>--all</VAR
></DT
><DD
><P
>	Vacuum all databases.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>[<SPAN
CLASS="OPTIONAL"
>-d</SPAN
>] <VAR
CLASS="REPLACEABLE"
>dbname</VAR
></VAR
><BR><VAR
CLASS="OPTION"
>[<SPAN
CLASS="OPTIONAL"
>--dbname</SPAN
>] <VAR
CLASS="REPLACEABLE"
>dbname</VAR
></VAR
></DT
><DD
><P
>	Specifies the name of the database to be cleaned or analyzed.
	If this is not specified and <VAR
CLASS="OPTION"
>-a</VAR
> (or
	<VAR
CLASS="OPTION"
>--all</VAR
>) is not used, the database name is read
	from the environment variable <TT
CLASS="ENVAR"
>PGDATABASE</TT
>.  If
	that is not set, the user name specified for the connection is
	used.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-e</VAR
><BR><VAR
CLASS="OPTION"
>--echo</VAR
></DT
><DD
><P
>        Echo the commands that <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> generates
	and sends to the server.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-f</VAR
><BR><VAR
CLASS="OPTION"
>--full</VAR
></DT
><DD
><P
>        Perform <SPAN
CLASS="QUOTE"
>"full"</SPAN
> vacuuming.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-q</VAR
><BR><VAR
CLASS="OPTION"
>--quiet</VAR
></DT
><DD
><P
>        Do not display a response.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-t <VAR
CLASS="REPLACEABLE"
>table</VAR
> [ (<VAR
CLASS="REPLACEABLE"
>column</VAR
> [,...]) ]</VAR
><BR><VAR
CLASS="OPTION"
>--table <VAR
CLASS="REPLACEABLE"
>table</VAR
> [ (<VAR
CLASS="REPLACEABLE"
>column</VAR
> [,...]) ]</VAR
></DT
><DD
><P
>	Clean or analyze <VAR
CLASS="REPLACEABLE"
>table</VAR
> only.
	Column names may be specified only in conjunction with
	the <VAR
CLASS="OPTION"
>--analyze</VAR
> option.
       </P
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>Tip: </B
>         If you specify columns, you probably have to escape the parentheses
         from the shell.  (See examples below.)
        </P
></BLOCKQUOTE
></DIV
></DD
><DT
><VAR
CLASS="OPTION"
>-v</VAR
><BR><VAR
CLASS="OPTION"
>--verbose</VAR
></DT
><DD
><P
>	Print detailed information during processing.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-z</VAR
><BR><VAR
CLASS="OPTION"
>--analyze</VAR
></DT
><DD
><P
>	Calculate statistics for use by the optimizer.
       </P
></DD
></DL
></DIV
><P>
   </P
><P
>    <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> also accepts 
    the following command-line arguments for connection parameters:
    
    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><VAR
CLASS="OPTION"
>-h <VAR
CLASS="REPLACEABLE"
>host</VAR
></VAR
><BR><VAR
CLASS="OPTION"
>--host <VAR
CLASS="REPLACEABLE"
>host</VAR
></VAR
></DT
><DD
><P
>	Specifies the host name of the machine on which the 
	server
	is running.  If the value begins with a slash, it is used 
	as the directory for the Unix domain socket.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-p <VAR
CLASS="REPLACEABLE"
>port</VAR
></VAR
><BR><VAR
CLASS="OPTION"
>--port <VAR
CLASS="REPLACEABLE"
>port</VAR
></VAR
></DT
><DD
><P
>	Specifies the TCP port or local Unix domain socket file 
	extension on which the server
	is listening for connections.
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-U <VAR
CLASS="REPLACEABLE"
>username</VAR
></VAR
><BR><VAR
CLASS="OPTION"
>--username <VAR
CLASS="REPLACEABLE"
>username</VAR
></VAR
></DT
><DD
><P
>        User name to connect as
       </P
></DD
><DT
><VAR
CLASS="OPTION"
>-W</VAR
><BR><VAR
CLASS="OPTION"
>--password</VAR
></DT
><DD
><P
>        Force password prompt.
       </P
></DD
></DL
></DIV
><P>
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN48842"
></A
><H2
>Diagnostics</H2
><P
>    <P
></P
></P><DIV
CLASS="VARIABLELIST"
><DL
><DT
><SAMP
CLASS="COMPUTEROUTPUT"
>VACUUM</SAMP
></DT
><DD
><P
>        Everything went well.
       </P
></DD
><DT
><SAMP
CLASS="COMPUTEROUTPUT"
>vacuumdb: Vacuum failed.</SAMP
></DT
><DD
><P
>        Something went wrong. <SPAN
CLASS="APPLICATION"
>vacuumdb</SPAN
> is only a wrapper
        script. See <A
HREF="sql-vacuum.html"
><I
>VACUUM</I
></A
>
        and <A
HREF="app-psql.html"
><SPAN
CLASS="APPLICATION"
>psql</SPAN
></A
> for a detailed
        discussion of error messages and potential problems.
       </P
></DD
></DL
></DIV
><P>
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN48859"
></A
><H2
>Environment</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="ENVAR"
>PGDATABASE</TT
><BR><TT
CLASS="ENVAR"
>PGHOST</TT
><BR><TT
CLASS="ENVAR"
>PGPORT</TT
><BR><TT
CLASS="ENVAR"
>PGUSER</TT
></DT
><DD
><P
>      Default connection parameters
     </P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN48873"
></A
><H2
>Examples</H2
><P
>    To clean the database <VAR
CLASS="LITERAL"
>test</VAR
>:
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$ </SAMP
><KBD
CLASS="USERINPUT"
>vacuumdb test</KBD
></PRE
><P>
   </P
><P
>    To clean and analyze for the optimizer a database named
    <VAR
CLASS="LITERAL"
>bigdb</VAR
>:
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$ </SAMP
><KBD
CLASS="USERINPUT"
>vacuumdb --analyze bigdb</KBD
></PRE
><P>
   </P
><P
>    To clean a single table
    <VAR
CLASS="LITERAL"
>foo</VAR
> in a database named
    <VAR
CLASS="LITERAL"
>xyzzy</VAR
>, and analyze a single column
    <VAR
CLASS="LITERAL"
>bar</VAR
> of the table for the optimizer:
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$ </SAMP
><KBD
CLASS="USERINPUT"
>vacuumdb --analyze --verbose --table 'foo(bar)' xyzzy</KBD
></PRE
><P>
   </P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN48892"
></A
><H2
>See Also</H2
><A
HREF="sql-vacuum.html"
><I
>VACUUM</I
></A
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="app-psql.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="reference-server.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><SPAN
CLASS="APPLICATION"
>psql</SPAN
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="reference-client.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>PostgreSQL Server Applications</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>