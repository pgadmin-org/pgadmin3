<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>Threading Behavior</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.4beta3 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="libpq - C Library"
HREF="libpq.html"><LINK
REL="PREVIOUS"
TITLE="The Password File"
HREF="libpq-pgpass.html"><LINK
REL="NEXT"
TITLE="Building libpq Programs"
HREF="libpq-build.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-09-15T14:41:50"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 7.4beta3 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="libpq-pgpass.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="libpq.html"
>Fast Backward</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Chapter 27. <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> - C Library</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="libpq.html"
>Fast Forward</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="libpq-build.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="LIBPQ-THREADING"
>27.12. Threading Behavior</A
></H1
><A
NAME="AEN21969"
></A
><P
><SPAN
CLASS="APPLICATION"
>libpq</SPAN
> is thread-safe if the library is
compiled using <TT
CLASS="FILENAME"
>configure</TT
>'s 
<VAR
CLASS="LITERAL"
>--enable-thread-safety</VAR
> command-line option.  
(In addition, you might need to use other threading command-line 
options to compile your client code.)</P
><P
>One restriction is that no two threads attempt to manipulate the same
<TT
CLASS="STRUCTNAME"
>PGconn</TT
> object at the same time. In particular, you cannot
issue concurrent commands from different threads through the same
connection object. (If you need to run concurrent commands, start up
multiple connections.)</P
><P
><TT
CLASS="STRUCTNAME"
>PGresult</TT
> objects are read-only after creation, and so can be 
passed around freely between threads.</P
><P
>The deprecated functions <CODE
CLASS="FUNCTION"
>PQoidStatus</CODE
> and
<CODE
CLASS="FUNCTION"
>fe_setauthsvc</CODE
> are not thread-safe and should not be
used in multithread programs.  <CODE
CLASS="FUNCTION"
>PQoidStatus</CODE
> can be
replaced by <CODE
CLASS="FUNCTION"
>PQoidValue</CODE
>.  There is no good reason to
call <CODE
CLASS="FUNCTION"
>fe_setauthsvc</CODE
> at all.</P
><P
><SPAN
CLASS="APPLICATION"
>libpq</SPAN
> applications that use the
<VAR
CLASS="LITERAL"
>crypt</VAR
> authentication method rely on the
<VAR
CLASS="LITERAL"
>crypt()</VAR
> operating system function, which is often
not thread-safe.<A
NAME="AEN21990"
></A
> It is better to use the <VAR
CLASS="LITERAL"
>md5</VAR
> method,
which is thread-safe on all platforms.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="libpq-pgpass.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="libpq-build.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>The Password File</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libpq.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Building <SPAN
CLASS="APPLICATION"
>libpq</SPAN
> Programs</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>