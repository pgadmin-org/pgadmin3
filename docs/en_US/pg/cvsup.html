<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>F.3. Getting The Source Via CVSup</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
<link rel="start" href="index.html" title="PostgreSQL 8.2.0 Documentation">
<link rel="up" href="cvs.html" title="Appendix F. The CVS Repository">
<link rel="prev" href="cvs-tree.html" title="F.2. CVS Tree Organization">
<link rel="next" href="docguide.html" title="Appendix G. Documentation">
<link rel="copyright" href="ln-legalnotice.html" title="Legal Notice">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="cvsup"></a>F.3. Getting The Source Via <span class="productname">CVSup</span></h2></div></div></div>
<p>   An alternative to using anonymous CVS for retrieving
   the <span class="productname">PostgreSQL</span> source tree
   is <span class="productname">CVSup</span>.
   <span class="productname">CVSup</span> was developed by
   John Polstra (<code class="email">&lt;<a href="mailto:jdp@polstra.com">jdp@polstra.com</a>&gt;</code>) to
   distribute CVS repositories and other file trees for the
   <a href="http://www.freebsd.org" target="_top">FreeBSD project</a>.
  </p>
<p>   A major advantage to using
   <span class="productname">CVSup</span> is that it can reliably
   replicate the <span class="emphasis"><em>entire</em></span> CVS repository on your local system,
   allowing fast local access to <code class="command">cvs</code> operations such as <code class="option">log</code>
   and <code class="option">diff</code>. Other advantages include fast synchronization to
   the <span class="productname">PostgreSQL</span> server due to an efficient
   streaming transfer protocol which only sends the changes since the last update.
  </p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2875078"></a>F.3.1. Preparing A <span class="productname">CVSup</span> Client System</h3></div></div></div>
<p>    Two directory areas are required for <span class="productname">CVSup</span>
    to do its job: a local <span class="productname">CVS</span> repository
    (or simply a directory area if you are fetching a snapshot rather
    than a repository; see below)
    and a local <span class="productname">CVSup</span> bookkeeping
    area. These can coexist in the same directory tree.
   </p>
<p>    Decide where you want to keep your local copy of the
    <span class="productname">CVS</span> repository. On one of our systems we
    recently set up a repository in <code class="filename">/home/cvs/</code>,
    but had formerly kept it under a
    <span class="productname">PostgreSQL</span> development tree in
    <code class="filename">/opt/postgres/cvs/</code>. If you intend to keep your
    repository in <code class="filename">/home/cvs/</code>, then put

</p>
<pre class="programlisting">setenv CVSROOT /home/cvs</pre>
<p>

    in your <code class="filename">.cshrc</code> file, or a similar line in
    your <code class="filename">.bashrc</code> or
    <code class="filename">.profile</code> file, depending on your shell.
   </p>
<p>    The <span class="application">cvs</span> repository area must be initialized.
    Once <code class="envar">CVSROOT</code> is set, then this can be done with a
    single command:

</p>
<pre class="programlisting">cvs init</pre>
<p>

    after which you should see at least a directory named
    <code class="filename">CVSROOT</code> when listing the
    <code class="envar">CVSROOT</code> directory:

</p>
<pre class="programlisting">$ ls $CVSROOT
CVSROOT/</pre>
<p>
   </p>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2875210"></a>F.3.2. Running a <span class="productname">CVSup</span> Client</h3></div></div></div>
<p>    Verify that
    <span class="application">cvsup</span> is in your path; on most systems
    you can do this by typing

</p>
<pre class="programlisting">which cvsup</pre>
<p>

    Then, simply run
    <span class="application">cvsup</span> using:

</p>
<pre class="programlisting">cvsup -L 2 <em class="replaceable"><code>postgres.cvsup</code></em></pre>
<p>

    where <code class="option">-L 2</code> enables some status messages so you
    can monitor the progress of the update,
    and <em class="replaceable"><code>postgres.cvsup</code></em> is
    the path and name you have given to your
    <span class="productname">CVSup</span> configuration file.
   </p>
<p>    Here is a <span class="productname">CVSup</span> configuration file
    modified for a specific installation, and which maintains a full
    local <span class="productname">CVS</span> repository:

</p>
<pre class="programlisting"># This file represents the standard CVSup distribution file
# for the <span class="productname">PostgreSQL</span> ORDBMS project
# Modified by lockhart@fourpalms.org 1997-08-28
# - Point to my local snapshot source tree
# - Pull the full CVS repository, not just the latest snapshot
#
# Defaults that apply to all the collections
*default host=cvsup.postgresql.org
*default compress
*default release=cvs
*default delete use-rel-suffix
# enable the following line to get the latest snapshot
#*default tag=.
# enable the following line to get whatever was specified above or by default
# at the date specified below
#*default date=97.08.29.00.00.00

# base directory where CVSup will store its 'bookmarks' file(s)
# will create subdirectory sup/
#*default base=/opt/postgres # /usr/local/pgsql
*default base=/home/cvs

# prefix directory where CVSup will store the actual distribution(s)
*default prefix=/home/cvs

# complete distribution, including all below
pgsql

# individual distributions vs 'the whole thing'
# pgsql-doc
# pgsql-perl5
# pgsql-src</pre>
<p>
   </p>
<p>    If you specify <code class="option">repository</code> instead of <code class="option">pgsql</code>
    in the above setup, you will get a complete copy of the entire
    repository at cvsup.postgresql.org, including its
    <code class="filename">CVSROOT</code> directory. If you do that, you will
    probably want to exclude those files in that directory that you
    want to modify locally, using a refuse file. For example, for the
    above setup you might put this in
    <code class="filename">/home/cvs/sup/repository/refuse</code>:
</p>
<pre class="programlisting">CVSROOT/config*
CVSROOT/commitinfo*
CVSROOT/loginfo*</pre>
<p>
    See the <span class="productname">CVSup</span> manual pages for how to use refuse files.
   </p>
<p>    The following is a suggested <span class="productname">CVSup</span> configuration file from
    the <span class="productname">PostgreSQL</span>
    <a href="ftp://ftp.postgresql.org/pub/CVSup/README.cvsup" target="_top">    ftp site</a>
    which will fetch the current snapshot only:

</p>
<pre class="programlisting"># This file represents the standard CVSup distribution file
# for the <span class="productname">PostgreSQL</span> ORDBMS project
#
# Defaults that apply to all the collections
*default host=cvsup.postgresql.org
*default compress
*default release=cvs
*default delete use-rel-suffix
*default tag=.

# base directory where CVSup will store its 'bookmarks' file(s)
*default base=<em class="replaceable"><code>/usr/local/pgsql</code></em>

# prefix directory where CVSup will store the actual distribution(s)
*default prefix=<em class="replaceable"><code>/usr/local/pgsql</code></em>

# complete distribution, including all below
pgsql

# individual distributions vs 'the whole thing'
# pgsql-doc
# pgsql-perl5
# pgsql-src</pre>
<p>
   </p>
</div>
</div></body>
</html>
